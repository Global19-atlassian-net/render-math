# PMC Math Tool 2 tests

# When composing the request, any parameter not given here will be absent in the
# request. If request.example is given, then that example file will be read, and
# stuffed into request.q. Default request.method is 'POST'.
# Defaults:
#   request.method: POST
#   expected.code: 200
#   expected.content-type: 'image/svg+xml; charset=utf-8'


# GET request with no params, should get the test page
- name: test-page
  request:
    method: GET
  expected:
    content-type: 'text/html; charset=utf-8'
    content-contains: "PMC Math Tool 2"

# GET request with some bad params
- name: get-bad-params
  request:
    method: GET
    foo: bar
    baz: buzz
  expected:
    code: 400
    content-type: 'text/plain; charset=utf-8'
    content-contains: "Unrecognized parameter name"

# POST request with no params, should get an error
- name: post-no-params
  expected:
    code: 400
    content-type: 'text/plain; charset=utf-8'
    content-contains: "No source math detected in input"

# POST request with some bad params
- name: post-bad-params
  request:
    foo: bar
    baz: buzz
  expected:
    code: 400
    content-type: 'text/plain; charset=utf-8'
    content-contains: "Unrecognized parameter name"








- name: simple-tex
  request:
    example: simple-tex
  expected:
    format: svg

- name: simple-tex-auto
  request:
    example: simple-tex
    in-format: auto
  expected:
    format: svg

- name: simple-tex-tex
  request:
    example: simple-tex
    in-format: latex
  expected:
    format: svg

- name: simple-tex-mml
  request:
    example: simple-tex
    in-format: mml
  expected:
    code: 400
    content-type: 'text/plain; charset=utf-8'
    content-contains: "Error parsing MathML"







- name: simple-mml
  request:
    example: simple-mml
    in-format: mml
  expected:
    format: svg


- name: cauchy-integral
  request:
    example: cauchy-integral
    in-format: mml
  expected:
    format: svg
  
- name: cauchy-schwarz
  request:
    example: cauchy-schwarz
    in-format: latex
  expected:
    format: svg
  
- name: christoffel-symbols
  request:
    example: christoffel-symbols
    in-format: mml
  expected:
    format: svg
  
- name: coins
  request:
    example: coins
    in-format: latex
  expected:
    format: svg
  
- name: cosines
  request:
    example: cosines
    in-format: mml
  expected:
    format: svg
  
- name: cross-product
  request:
    example: cross-product
    in-format: latex
  expected:
    format: svg
  
- name: curl-vector-field
  request:
    example: curl-vector-field
    in-format: mml
  expected:
    format: svg
  
- name: gauss-divergence
  request:
    example: gauss-divergence
    in-format: mml
  expected:
    format: svg
  
- name: sum
  request:
    example: sum
    in-format: latex
  expected:
    format: svg
  
- name: sum-displaystyle
  request:
    example: sum-displaystyle
    in-format: latex
  expected:
    format: svg
  
- name: lorentz
  request:
    example: lorentz
    in-format: latex
  expected:
    format: svg
  
- name: maxwell
  request:
    example: maxwell
    in-format: latex
  expected:
    format: svg
  
- name: quadratic
  request:
    example: quadratic
    in-format: mml
  expected:
    format: svg
  
- name: ramanujan
  request:
    example: ramanujan
    in-format: latex
  expected:
    format: svg
  
- name: rogers-rmanujan
  request:
    example: rogers-rmanujan
    in-format: latex
  expected:
    format: svg
  
- name: standard-deviation
  request:
    example: standard-deviation
    in-format: mml
  expected:
    format: svg
  
